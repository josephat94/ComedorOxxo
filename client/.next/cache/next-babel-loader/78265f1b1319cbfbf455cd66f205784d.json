{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/home/jreyes/Desktop/ComedorOxxo/client/pages/CargarArchivo.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/layout/Layout';\nimport FileLoader from '../components/fileLoader/FileLoader';\nimport Title from '../components/title/Title';\nimport { useState } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport axios from 'axios';\n\nvar Actions = function Actions(props) {\n  var onCancel = props.onCancel,\n      onSuccess = props.onSuccess;\n  return __jsx(\"div\", {\n    className: \"actions__ctn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 5\n    }\n  }, __jsx(Button, {\n    variant: \"outline-danger\",\n    onClick: onCancel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }\n  }, \"Cancelar\"), __jsx(Button, {\n    variant: \"outline-secondary\",\n    onClick: onSuccess,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }\n  }, \"Guardar\"));\n};\n\n_c = Actions;\n\nvar CargarArchivo = function CargarArchivo(props) {\n  _s();\n\n  var _useState = useState(null),\n      files = _useState[0],\n      setFiles = _useState[1];\n\n  var _useState2 = useState(null),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      success = _useState3[0],\n      setSuccess = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var saveFile = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var formdata, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formdata = new FormData();\n              formdata.append('csv', files);\n              setError(false);\n              setSuccess(false);\n              setLoading(true);\n              _context.prev = 5;\n              _context.next = 8;\n              return fetch('http://' + process.env.API_HOST + '/schedule', {\n                method: 'POST',\n                headers: {},\n                body: formdata\n              });\n\n            case 8:\n              response = _context.sent;\n              setSuccess(true);\n              setLoading(false);\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](5);\n              setError(true);\n              setLoading(false);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 13]]);\n    }));\n\n    return function saveFile() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, \"Cargar archivo CSV\"), error && __jsx(Alert, {\n    key: 'idx',\n    variant: 'danger',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Error al agregar el archivo\"), success && __jsx(Alert, {\n    key: 'idx',\n    variant: 'success',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Archivo agregado correctamente\"), loading && __jsx(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    className: \"sr-only\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"Cargando horarios...\")), __jsx(FileLoader, {\n    files: files,\n    setFiles: setFiles,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), files ? __jsx(Actions, {\n    onCancel: function onCancel() {\n      setFiles([]);\n    },\n    onSuccess: saveFile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }) : null);\n};\n\n_s(CargarArchivo, \"A56TFu5461tw3IjCuea+gEUf7z8=\");\n\n_c2 = CargarArchivo;\nexport default CargarArchivo;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Actions\");\n$RefreshReg$(_c2, \"CargarArchivo\");","map":{"version":3,"sources":["/home/jreyes/Desktop/ComedorOxxo/client/pages/CargarArchivo.js"],"names":["Layout","FileLoader","Title","useState","Button","Alert","Spinner","axios","Actions","props","onCancel","onSuccess","CargarArchivo","files","setFiles","error","setError","success","setSuccess","loading","setLoading","saveFile","formdata","FormData","append","fetch","process","env","API_HOST","method","headers","body","response"],"mappings":"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","sourcesContent":["import Layout from '../components/layout/Layout';\nimport FileLoader from '../components/fileLoader/FileLoader';\nimport Title from '../components/title/Title';\nimport { useState } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport Spinner from 'react-bootstrap/Spinner';\nimport axios from 'axios';\nconst Actions = (props) => {\n  const { onCancel, onSuccess } = props;\n  return (\n    <div className='actions__ctn'>\n      <Button variant='outline-danger' onClick={onCancel}>\n        Cancelar\n      </Button>\n      <Button variant='outline-secondary' onClick={onSuccess}>\n        Guardar\n      </Button>\n    </div>\n  );\n};\n\nconst CargarArchivo = (props) => {\n  const [files, setFiles] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const saveFile = async () => {\n    const formdata = new FormData();\n    formdata.append('csv', files);\n    setError(false);\n    setSuccess(false);\n    setLoading(true);\n    try {\n      const response = await fetch(\n        'http://' + process.env.API_HOST + '/schedule',\n        {\n          method: 'POST',\n          headers: {},\n          body: formdata,\n        }\n      );\n      setSuccess(true);\n      setLoading(false);\n    } catch (error) {\n      setError(true);\n      setLoading(false);\n    }\n  };\n  return (\n    <Layout>\n      <Title>Cargar archivo CSV</Title>\n      {error && (\n        <Alert key={'idx'} variant={'danger'}>\n          Error al agregar el archivo\n        </Alert>\n      )}\n      {success && (\n        <Alert key={'idx'} variant={'success'}>\n          Archivo agregado correctamente\n        </Alert>\n      )}\n      {loading && (\n        <Spinner animation='border' role='status'>\n          <span className='sr-only'>Cargando horarios...</span>\n        </Spinner>\n      )}\n      <FileLoader files={files} setFiles={setFiles}></FileLoader>\n      {files ? (\n        <Actions\n          onCancel={() => {\n            setFiles([]);\n          }}\n          onSuccess={saveFile}\n        ></Actions>\n      ) : null}\n    </Layout>\n  );\n};\n\nexport default CargarArchivo;\n"]},"metadata":{},"sourceType":"module"}